function cov_15fdw1zdaq(){var path="C:\\school\\2.2\\DEVOPS\\project\\DevOps_project2024\\utils\\update-student-util.js";var hash="d2cc98542ec59376d2473a693bba196d55aa313f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\school\\2.2\\DEVOPS\\project\\DevOps_project2024\\utils\\update-student-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:4,column:56},end:{line:4,column:64}},"2":{start:{line:6,column:4},end:{line:29,column:5}},"3":{start:{line:8,column:29},end:{line:8,column:52}},"4":{start:{line:9,column:8},end:{line:11,column:9}},"5":{start:{line:10,column:12},end:{line:10,column:39}},"6":{start:{line:14,column:24},end:{line:18,column:9}},"7":{start:{line:20,column:8},end:{line:22,column:9}},"8":{start:{line:21,column:12},end:{line:21,column:74}},"9":{start:{line:25,column:8},end:{line:25,column:71}},"10":{start:{line:27,column:8},end:{line:27,column:64}},"11":{start:{line:28,column:8},end:{line:28,column:86}},"12":{start:{line:32,column:0},end:{line:32,column:31}}},fnMap:{"0":{name:"updateStudent",decl:{start:{line:3,column:15},end:{line:3,column:28}},loc:{start:{line:3,column:39},end:{line:30,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:11,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:11,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:9},"1":{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:20}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d2cc98542ec59376d2473a693bba196d55aa313f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_15fdw1zdaq=function(){return actualCoverage;};}return actualCoverage;}cov_15fdw1zdaq();const Student=(cov_15fdw1zdaq().s[0]++,require('../models/Student'));// Adjust the path if necessary
async function updateStudent(req,res){cov_15fdw1zdaq().f[0]++;const{adminNumber,name,diploma,cGPA,image}=(cov_15fdw1zdaq().s[1]++,req.body);cov_15fdw1zdaq().s[2]++;try{// Prepare update object
const updateFields=(cov_15fdw1zdaq().s[3]++,{name,diploma,cGPA});cov_15fdw1zdaq().s[4]++;if(image!==undefined){cov_15fdw1zdaq().b[0][0]++;cov_15fdw1zdaq().s[5]++;updateFields.image=image;// Include image only if provided
}else{cov_15fdw1zdaq().b[0][1]++;}// Perform the update
const student=(cov_15fdw1zdaq().s[6]++,await Student.findOneAndUpdate({adminNumber},updateFields,{new:true}// Return the updated document
));cov_15fdw1zdaq().s[7]++;if(!student){cov_15fdw1zdaq().b[1][0]++;cov_15fdw1zdaq().s[8]++;return res.status(404).json({message:'Student not found'});}else{cov_15fdw1zdaq().b[1][1]++;}// Respond with the updated student
cov_15fdw1zdaq().s[9]++;res.json({message:'Student updated successfully',student});}catch(error){cov_15fdw1zdaq().s[10]++;console.error('Error updating student:',error.message);cov_15fdw1zdaq().s[11]++;res.status(500).json({message:'Error updating student: '+error.message});}}cov_15fdw1zdaq().s[12]++;module.exports=updateStudent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTVmZHcxemRhcSIsImFjdHVhbENvdmVyYWdlIiwiU3R1ZGVudCIsInMiLCJyZXF1aXJlIiwidXBkYXRlU3R1ZGVudCIsInJlcSIsInJlcyIsImYiLCJhZG1pbk51bWJlciIsIm5hbWUiLCJkaXBsb21hIiwiY0dQQSIsImltYWdlIiwiYm9keSIsInVwZGF0ZUZpZWxkcyIsInVuZGVmaW5lZCIsImIiLCJzdHVkZW50IiwiZmluZE9uZUFuZFVwZGF0ZSIsIm5ldyIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZXJyb3IiLCJjb25zb2xlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVwZGF0ZS1zdHVkZW50LXV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU3R1ZGVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9TdHVkZW50Jyk7IC8vIEFkanVzdCB0aGUgcGF0aCBpZiBuZWNlc3NhcnlcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVN0dWRlbnQocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IHsgYWRtaW5OdW1iZXIsIG5hbWUsIGRpcGxvbWEsIGNHUEEsIGltYWdlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFByZXBhcmUgdXBkYXRlIG9iamVjdFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkcyA9IHsgbmFtZSwgZGlwbG9tYSwgY0dQQSB9O1xyXG4gICAgICAgIGlmIChpbWFnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZUZpZWxkcy5pbWFnZSA9IGltYWdlOyAvLyBJbmNsdWRlIGltYWdlIG9ubHkgaWYgcHJvdmlkZWRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBlcmZvcm0gdGhlIHVwZGF0ZVxyXG4gICAgICAgIGNvbnN0IHN0dWRlbnQgPSBhd2FpdCBTdHVkZW50LmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgICAgICAgIHsgYWRtaW5OdW1iZXIgfSxcclxuICAgICAgICAgICAgdXBkYXRlRmllbGRzLFxyXG4gICAgICAgICAgICB7IG5ldzogdHJ1ZSB9IC8vIFJldHVybiB0aGUgdXBkYXRlZCBkb2N1bWVudFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICghc3R1ZGVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtZXNzYWdlOiAnU3R1ZGVudCBub3QgZm91bmQnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzcG9uZCB3aXRoIHRoZSB1cGRhdGVkIHN0dWRlbnRcclxuICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdTdHVkZW50IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywgc3R1ZGVudCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3R1ZGVudDonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciB1cGRhdGluZyBzdHVkZW50OiAnICsgZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1cGRhdGVTdHVkZW50O1xyXG4iXSwibWFwcGluZ3MiOiJ1Z0VBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxPQUFPLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsRUFBRTtBQUU5QyxjQUFlLENBQUFDLGFBQWFBLENBQUNDLEdBQUcsQ0FBRUMsR0FBRyxDQUFFLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxNQUNuQyxLQUFNLENBQUVDLFdBQVcsQ0FBRUMsSUFBSSxDQUFFQyxPQUFPLENBQUVDLElBQUksQ0FBRUMsS0FBTSxDQUFDLEVBQUFiLGNBQUEsR0FBQUcsQ0FBQSxNQUFHRyxHQUFHLENBQUNRLElBQUksRUFBQ2QsY0FBQSxHQUFBRyxDQUFBLE1BRTdELEdBQUksQ0FDQTtBQUNBLEtBQU0sQ0FBQVksWUFBWSxFQUFBZixjQUFBLEdBQUFHLENBQUEsTUFBRyxDQUFFTyxJQUFJLENBQUVDLE9BQU8sQ0FBRUMsSUFBSyxDQUFDLEVBQUNaLGNBQUEsR0FBQUcsQ0FBQSxNQUM3QyxHQUFJVSxLQUFLLEdBQUtHLFNBQVMsQ0FBRSxDQUFBaEIsY0FBQSxHQUFBaUIsQ0FBQSxTQUFBakIsY0FBQSxHQUFBRyxDQUFBLE1BQ3JCWSxZQUFZLENBQUNGLEtBQUssQ0FBR0EsS0FBSyxDQUFFO0FBQ2hDLENBQUMsS0FBQWIsY0FBQSxHQUFBaUIsQ0FBQSxVQUVEO0FBQ0EsS0FBTSxDQUFBQyxPQUFPLEVBQUFsQixjQUFBLEdBQUFHLENBQUEsTUFBRyxLQUFNLENBQUFELE9BQU8sQ0FBQ2lCLGdCQUFnQixDQUMxQyxDQUFFVixXQUFZLENBQUMsQ0FDZk0sWUFBWSxDQUNaLENBQUVLLEdBQUcsQ0FBRSxJQUFLLENBQUU7QUFDbEIsQ0FBQyxFQUFDcEIsY0FBQSxHQUFBRyxDQUFBLE1BRUYsR0FBSSxDQUFDZSxPQUFPLENBQUUsQ0FBQWxCLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUcsQ0FBQSxNQUNWLE1BQU8sQ0FBQUksR0FBRyxDQUFDYyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsbUJBQW9CLENBQUMsQ0FBQyxDQUNqRSxDQUFDLEtBQUF2QixjQUFBLEdBQUFpQixDQUFBLFVBRUQ7QUFBQWpCLGNBQUEsR0FBQUcsQ0FBQSxNQUNBSSxHQUFHLENBQUNlLElBQUksQ0FBQyxDQUFFQyxPQUFPLENBQUUsOEJBQThCLENBQUVMLE9BQVEsQ0FBQyxDQUFDLENBQ2xFLENBQUUsTUFBT00sS0FBSyxDQUFFLENBQUF4QixjQUFBLEdBQUFHLENBQUEsT0FDWnNCLE9BQU8sQ0FBQ0QsS0FBSyxDQUFDLHlCQUF5QixDQUFFQSxLQUFLLENBQUNELE9BQU8sQ0FBQyxDQUFDdkIsY0FBQSxHQUFBRyxDQUFBLE9BQ3hESSxHQUFHLENBQUNjLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUVDLE9BQU8sQ0FBRSwwQkFBMEIsQ0FBR0MsS0FBSyxDQUFDRCxPQUFRLENBQUMsQ0FBQyxDQUNqRixDQUNKLENBQUN2QixjQUFBLEdBQUFHLENBQUEsT0FFRHVCLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHdEIsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==