function cov_15fdw1zdaq(){var path="C:\\school\\2.2\\DEVOPS\\project\\DevOps_project2024\\utils\\update-student-util.js";var hash="bdbed9ace44d1ab193f1e28a2665a68f0d4a99ce";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\school\\2.2\\DEVOPS\\project\\DevOps_project2024\\utils\\update-student-util.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:44}},"1":{start:{line:4,column:43},end:{line:4,column:54}},"2":{start:{line:6,column:4},end:{line:40,column:5}},"3":{start:{line:8,column:29},end:{line:12,column:9}},"4":{start:{line:15,column:8},end:{line:17,column:9}},"5":{start:{line:16,column:12},end:{line:16,column:39}},"6":{start:{line:20,column:24},end:{line:24,column:9}},"7":{start:{line:26,column:8},end:{line:28,column:9}},"8":{start:{line:27,column:12},end:{line:27,column:50}},"9":{start:{line:31,column:8},end:{line:37,column:10}},"10":{start:{line:39,column:8},end:{line:39,column:69}},"11":{start:{line:45,column:0},end:{line:45,column:31}}},fnMap:{"0":{name:"updateStudent",decl:{start:{line:3,column:15},end:{line:3,column:28}},loc:{start:{line:3,column:55},end:{line:41,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:15,column:8},end:{line:17,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:17,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:15},"1":{loc:{start:{line:26,column:8},end:{line:28,column:9}},type:"if",locations:[{start:{line:26,column:8},end:{line:28,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:26},"2":{loc:{start:{line:35,column:18},end:{line:35,column:63}},type:"cond-expr",locations:[{start:{line:35,column:33},end:{line:35,column:56}},{start:{line:35,column:59},end:{line:35,column:63}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"bdbed9ace44d1ab193f1e28a2665a68f0d4a99ce"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_15fdw1zdaq=function(){return actualCoverage;};}return actualCoverage;}cov_15fdw1zdaq();const Student=(cov_15fdw1zdaq().s[0]++,require('../models/Student'));// Adjust the path if necessary
async function updateStudent(adminNumber,studentData){cov_15fdw1zdaq().f[0]++;const{name,diploma,cGPA,image}=(cov_15fdw1zdaq().s[1]++,studentData);cov_15fdw1zdaq().s[2]++;try{// Prepare update object
const updateFields=(cov_15fdw1zdaq().s[3]++,{name,diploma,cGPA});// If image exists, include it in the update
cov_15fdw1zdaq().s[4]++;if(image!==undefined){cov_15fdw1zdaq().b[0][0]++;cov_15fdw1zdaq().s[5]++;updateFields.image=image;// Only update the image if it's provided
}else{cov_15fdw1zdaq().b[0][1]++;}// Perform the update operation
const student=(cov_15fdw1zdaq().s[6]++,await Student.findOneAndUpdate({adminNumber},// Find by adminNumber
updateFields,// Update fields, including image if present
{new:true}// Return the updated document
));cov_15fdw1zdaq().s[7]++;if(!student){cov_15fdw1zdaq().b[1][0]++;cov_15fdw1zdaq().s[8]++;throw new Error('Resource not found');}else{cov_15fdw1zdaq().b[1][1]++;}// Convert Decimal128 fields to strings if necessary
cov_15fdw1zdaq().s[9]++;return{adminNumber:student.adminNumber,name:student.name,diploma:student.diploma,cGPA:student.cGPA?(cov_15fdw1zdaq().b[2][0]++,student.cGPA.toString()):(cov_15fdw1zdaq().b[2][1]++,null),image:student.image};}catch(error){cov_15fdw1zdaq().s[10]++;throw new Error(`Error updating resource: ${error.message}`);}}cov_15fdw1zdaq().s[11]++;module.exports=updateStudent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTVmZHcxemRhcSIsImFjdHVhbENvdmVyYWdlIiwiU3R1ZGVudCIsInMiLCJyZXF1aXJlIiwidXBkYXRlU3R1ZGVudCIsImFkbWluTnVtYmVyIiwic3R1ZGVudERhdGEiLCJmIiwibmFtZSIsImRpcGxvbWEiLCJjR1BBIiwiaW1hZ2UiLCJ1cGRhdGVGaWVsZHMiLCJ1bmRlZmluZWQiLCJiIiwic3R1ZGVudCIsImZpbmRPbmVBbmRVcGRhdGUiLCJuZXciLCJFcnJvciIsInRvU3RyaW5nIiwiZXJyb3IiLCJtZXNzYWdlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVwZGF0ZS1zdHVkZW50LXV0aWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU3R1ZGVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9TdHVkZW50Jyk7IC8vIEFkanVzdCB0aGUgcGF0aCBpZiBuZWNlc3NhcnlcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVN0dWRlbnQoYWRtaW5OdW1iZXIsIHN0dWRlbnREYXRhKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGRpcGxvbWEsIGNHUEEsIGltYWdlIH0gPSBzdHVkZW50RGF0YTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFByZXBhcmUgdXBkYXRlIG9iamVjdFxyXG4gICAgICAgIGNvbnN0IHVwZGF0ZUZpZWxkcyA9IHtcclxuICAgICAgICAgICAgbmFtZSxcclxuICAgICAgICAgICAgZGlwbG9tYSxcclxuICAgICAgICAgICAgY0dQQVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIElmIGltYWdlIGV4aXN0cywgaW5jbHVkZSBpdCBpbiB0aGUgdXBkYXRlXHJcbiAgICAgICAgaWYgKGltYWdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdXBkYXRlRmllbGRzLmltYWdlID0gaW1hZ2U7ICAvLyBPbmx5IHVwZGF0ZSB0aGUgaW1hZ2UgaWYgaXQncyBwcm92aWRlZFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUGVyZm9ybSB0aGUgdXBkYXRlIG9wZXJhdGlvblxyXG4gICAgICAgIGNvbnN0IHN0dWRlbnQgPSBhd2FpdCBTdHVkZW50LmZpbmRPbmVBbmRVcGRhdGUoXHJcbiAgICAgICAgICAgIHsgYWRtaW5OdW1iZXIgfSwgIC8vIEZpbmQgYnkgYWRtaW5OdW1iZXJcclxuICAgICAgICAgICAgdXBkYXRlRmllbGRzLCAgLy8gVXBkYXRlIGZpZWxkcywgaW5jbHVkaW5nIGltYWdlIGlmIHByZXNlbnRcclxuICAgICAgICAgICAgeyBuZXc6IHRydWUgfSAgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIGRvY3VtZW50XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKCFzdHVkZW50KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2Ugbm90IGZvdW5kJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDb252ZXJ0IERlY2ltYWwxMjggZmllbGRzIHRvIHN0cmluZ3MgaWYgbmVjZXNzYXJ5XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYWRtaW5OdW1iZXI6IHN0dWRlbnQuYWRtaW5OdW1iZXIsXHJcbiAgICAgICAgICAgIG5hbWU6IHN0dWRlbnQubmFtZSxcclxuICAgICAgICAgICAgZGlwbG9tYTogc3R1ZGVudC5kaXBsb21hLFxyXG4gICAgICAgICAgICBjR1BBOiBzdHVkZW50LmNHUEEgPyBzdHVkZW50LmNHUEEudG9TdHJpbmcoKSA6IG51bGwsXHJcbiAgICAgICAgICAgIGltYWdlOiBzdHVkZW50LmltYWdlLFxyXG4gICAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgdXBkYXRpbmcgcmVzb3VyY2U6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHVwZGF0ZVN0dWRlbnQ7XHJcbiJdLCJtYXBwaW5ncyI6ImlxRUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQUFFLE9BQU8sRUFBQUYsY0FBQSxHQUFBRyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxFQUFFO0FBRTlDLGNBQWUsQ0FBQUMsYUFBYUEsQ0FBQ0MsV0FBVyxDQUFFQyxXQUFXLENBQUUsQ0FBQVAsY0FBQSxHQUFBUSxDQUFBLE1BQ25ELEtBQU0sQ0FBRUMsSUFBSSxDQUFFQyxPQUFPLENBQUVDLElBQUksQ0FBRUMsS0FBTSxDQUFDLEVBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUFHSSxXQUFXLEVBQUNQLGNBQUEsR0FBQUcsQ0FBQSxNQUVuRCxHQUFJLENBQ0E7QUFDQSxLQUFNLENBQUFVLFlBQVksRUFBQWIsY0FBQSxHQUFBRyxDQUFBLE1BQUcsQ0FDakJNLElBQUksQ0FDSkMsT0FBTyxDQUNQQyxJQUNKLENBQUMsRUFFRDtBQUFBWCxjQUFBLEdBQUFHLENBQUEsTUFDQSxHQUFJUyxLQUFLLEdBQUtFLFNBQVMsQ0FBRSxDQUFBZCxjQUFBLEdBQUFlLENBQUEsU0FBQWYsY0FBQSxHQUFBRyxDQUFBLE1BQ3JCVSxZQUFZLENBQUNELEtBQUssQ0FBR0EsS0FBSyxDQUFHO0FBQ2pDLENBQUMsS0FBQVosY0FBQSxHQUFBZSxDQUFBLFVBRUQ7QUFDQSxLQUFNLENBQUFDLE9BQU8sRUFBQWhCLGNBQUEsR0FBQUcsQ0FBQSxNQUFHLEtBQU0sQ0FBQUQsT0FBTyxDQUFDZSxnQkFBZ0IsQ0FDMUMsQ0FBRVgsV0FBWSxDQUFDLENBQUc7QUFDbEJPLFlBQVksQ0FBRztBQUNmLENBQUVLLEdBQUcsQ0FBRSxJQUFLLENBQUc7QUFDbkIsQ0FBQyxFQUFDbEIsY0FBQSxHQUFBRyxDQUFBLE1BRUYsR0FBSSxDQUFDYSxPQUFPLENBQUUsQ0FBQWhCLGNBQUEsR0FBQWUsQ0FBQSxTQUFBZixjQUFBLEdBQUFHLENBQUEsTUFDVixLQUFNLElBQUksQ0FBQWdCLEtBQUssQ0FBQyxvQkFBb0IsQ0FBQyxDQUN6QyxDQUFDLEtBQUFuQixjQUFBLEdBQUFlLENBQUEsVUFFRDtBQUFBZixjQUFBLEdBQUFHLENBQUEsTUFDQSxNQUFPLENBQ0hHLFdBQVcsQ0FBRVUsT0FBTyxDQUFDVixXQUFXLENBQ2hDRyxJQUFJLENBQUVPLE9BQU8sQ0FBQ1AsSUFBSSxDQUNsQkMsT0FBTyxDQUFFTSxPQUFPLENBQUNOLE9BQU8sQ0FDeEJDLElBQUksQ0FBRUssT0FBTyxDQUFDTCxJQUFJLEVBQUFYLGNBQUEsR0FBQWUsQ0FBQSxTQUFHQyxPQUFPLENBQUNMLElBQUksQ0FBQ1MsUUFBUSxDQUFDLENBQUMsR0FBQXBCLGNBQUEsR0FBQWUsQ0FBQSxTQUFHLElBQUksRUFDbkRILEtBQUssQ0FBRUksT0FBTyxDQUFDSixLQUNuQixDQUFDLENBQ0wsQ0FBRSxNQUFPUyxLQUFLLENBQUUsQ0FBQXJCLGNBQUEsR0FBQUcsQ0FBQSxPQUNaLEtBQU0sSUFBSSxDQUFBZ0IsS0FBSyxDQUFDLDRCQUE0QkUsS0FBSyxDQUFDQyxPQUFPLEVBQUUsQ0FBQyxDQUNoRSxDQUNKLENBQUN0QixjQUFBLEdBQUFHLENBQUEsT0FJRG9CLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHbkIsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==